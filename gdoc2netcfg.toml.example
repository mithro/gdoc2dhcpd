# Example configuration for gdoc2netcfg.
# Copy this file to gdoc2netcfg.toml and edit for your site:
#   cp gdoc2netcfg.toml.example gdoc2netcfg.toml
#
# The values below are for the Welland site. Monarto differences:
#   name = "monarto", domain = "monarto.mithis.com",
#   site_octet = 2, ipv6 prefix = "2404:e80:a137:" (same),
#   enabled generators = ["dnsmasq_internal"] only.

# ── Site-specific: change these per site ──────────────────────────
[site]
name = "welland"
domain = "welland.mithis.com"
public_ipv4 = "87.121.95.37"
site_octet = 1  # Second octet: 10.1.X.X for Welland, 10.2.X.X for Monarto

[sheets]
# Google Sheets published CSV URLs for each data source
network = "https://docs.google.com/spreadsheets/d/e/2PACX-1vR5j6yiZCEv5YNoeVNLM4MMsxzBVjG4OtViBz7tXXF1LydHd8bCOOVWt7MvfVEPZtK0TeWgyxF3i9Tj/pub?gid=1476589425&single=true&output=csv"
iot = "https://docs.google.com/spreadsheets/d/e/2PACX-1vR5j6yiZCEv5YNoeVNLM4MMsxzBVjG4OtViBz7tXXF1LydHd8bCOOVWt7MvfVEPZtK0TeWgyxF3i9Tj/pub?gid=1695016218&single=true&output=csv"
vlan_allocations = "https://docs.google.com/spreadsheets/d/e/2PACX-1vR5j6yiZCEv5YNoeVNLM4MMsxzBVjG4OtViBz7tXXF1LydHd8bCOOVWt7MvfVEPZtK0TeWgyxF3i9Tj/pub?gid=208407908&single=true&output=csv"

[cache]
directory = ".cache"

# ── Site-specific: IPv6 prefixes may differ per site ─────────────
[ipv6]
# IPv6 prefixes for dual-stack address generation
# Format: 10.AA.BB.CCC -> {prefix}AABB::CCC
prefixes = [
    "2404:e80:a137:",    # ISP prefix (Launtel)
]
disabled_prefixes = [
    "2001:470:82b3:",    # HE.net prefix
]

# VLANs and network_subdomains are now derived from the
# VLAN Allocations spreadsheet sheet, not configured here.

# ── Site-specific: Monarto only enables ["dnsmasq_internal"] ─────
[generators]
# Which generators to enable
enabled = ["dnsmasq_internal", "dnsmasq_external", "nagios", "nginx"]

[generators.dnsmasq_internal]
output_dir = "internal"

[generators.dnsmasq_external]
output_dir = "external"

[generators.nginx]
acme_webroot = "/var/www/acme"
htpasswd_file = "/etc/nginx/.htpasswd"
https_listen = "127.0.0.1:8443"
# lua_healthcheck_path = "/usr/share/lua/5.1/"  # Path to lua-resty-upstream-healthcheck
# healthcheck_dir = "/etc/nginx/healthcheck.d"  # Runtime dir for per-host healthcheck .lua files

[generators.letsencrypt]
auth_hook = "/opt/certbot/bin/certbot-hook-dnsmasq"
dnsmasq_conf_dir = "/etc/dnsmasq.d/external"
dnsmasq_conf = "/etc/dnsmasq.d/dnsmasq.external.conf"
dnsmasq_service = "dnsmasq@external"

[generators.nagios]
output = "nagios-switches.cfg"

[generators.topology]
output = "topology.dot"
show_unknown_macs = "false"
